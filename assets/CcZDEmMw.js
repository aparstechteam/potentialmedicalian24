import{_ as q}from"./BhGX3hGk.js";import{_ as j,r as l,l as N,o as n,c as r,b as i,w as v,d as x,t as f,j as a,z as S,as as A,F as T,s as E,a as p,i as F,v as H,y as B,X as M,at as C,U as Q,L,I as Y,k as O}from"./DHgHmND9.js";import{_ as X}from"./ByRklFmd.js";const G=window.setInterval,J={class:"fixed__timer"},K={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(D){const h=D,g=l(0),t=l(0),u=l(0),d=()=>{let o=new Date(h.end_time).getTime(),b=G(()=>{let _=new Date().getTime(),e=o-_;g.value=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),t.value=Math.floor(e%(1e3*60*60)/(1e3*60)),u.value=Math.floor(e%(1e3*60)/1e3),e<0&&clearInterval(b)},1e3)};N(()=>{d()});const s=o=>o<10?`0${o}`:o;return(o,b)=>{const _=S;return n(),r("div",J,[i(_,{color:"black",size:"lg"},{default:v(()=>[x(f(s(a(g)))+" : "+f(s(a(t)))+" : "+f(s(a(u))),1)]),_:1})])}}},P=j(K,[["__scopeId","data-v-5b7b9e72"]]),R={key:0,class:"max-w-2xl mx-auto pb-10 ns"},W=["innerHTML"],Z={class:"flex gap-3 my-2 flex-wrap"},ee={class:"mt-3 space-y-2"},te=["onClick"],se={class:"text-center"},oe={key:1},ie={__name:"questions",setup(D){const{$axios:h,$userStore:g}=O(),t=l(null),u=l(!1),d=l(null),s=A("timer",null),o=async()=>{try{if(u.value){B().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3,color:"green"}),M("revisit","submit","revisited exam submitted"),C("/");return}const e=t.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));h.post("/exam/submit",{answers:e}),clearTimeout(s.value),s.value=null,B().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3,color:"green"}),M("exam","submit","exam submitted")}catch(e){console.log("===================================="),console.log(e),console.log("====================================")}C("/")},b=async()=>{const{data:e}=await h.get("/exam");if(s.value&&clearTimeout(s.value),e.not_started){B().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),C("/");return}t.value=e.questions,d.value=e.end_time,u.value=e.participated,s.value=setTimeout(()=>{o()},d.value-new Date().getTime()),M("exam","start","exam started")};N(()=>{b()});const _=(e,c)=>{t.value[e].selected=c};return(e,c)=>{const y=q,$=S,z=X,I=P,U=Q("katex");return n(),r(T,null,[a(t)?(n(),r("div",R,[(n(!0),r(T,null,E(a(t),(k,m)=>(n(),r("div",{key:m,class:L(["p-5 mx-auto my-3 relative text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":a(t)[m].selected}])},[p("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:k.question},null,8,W),p("div",Z,[i(y,null,{default:v(()=>[x(" Q no. "+f(m+1),1)]),_:2},1024),i(y,{color:"violet"},{default:v(()=>[x(f(k.subject),1)]),_:2},1024),i(y,{color:"emerald"},{default:v(()=>[x(" 1 Mark")]),_:1})]),p("div",ee,[(n(!0),r(T,null,E(k.options,(w,V)=>(n(),r("div",{key:V,class:L(["flex items-center transition z-10 hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":a(t)[m].selected==w._id}]),onClick:ne=>_(m,w._id)},[Y(p("div",null,null,512),[[U,w.option_text]])],10,te))),128))])],2))),128)),p("div",se,[i($,{size:"lg",onClick:o},{default:v(()=>[x(" Submit ")]),_:1})])])):(n(),r("div",oe,[i(z)])),a(t)?(n(),F(I,{key:2,end_time:a(d)},null,8,["end_time"])):H("",!0)],64)}}};export{ie as default};
