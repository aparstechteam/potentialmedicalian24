import{_ as j}from"./Bo8R5EjY.js";import{_ as U,r as l,l as N,o as n,c as r,b as i,w as v,d as h,t as f,j as a,z as S,ar as q,F as T,s as M,a as p,i as H,v as Q,y as L,as as B,h as A,U as F,L as D,I as Y,k as O}from"./DP0v5Lqn.js";const X=window.setInterval,G={class:"fixed__timer"},J={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(C){const x=C,g=l(0),t=l(0),u=l(0),d=()=>{let o=new Date(x.end_time).getTime(),b=X(()=>{let _=new Date().getTime(),e=o-_;g.value=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),t.value=Math.floor(e%(1e3*60*60)/(1e3*60)),u.value=Math.floor(e%(1e3*60)/1e3),e<0&&clearInterval(b)},1e3)};N(()=>{d()});const s=o=>o<10?`0${o}`:o;return(o,b)=>{const _=S;return n(),r("div",G,[i(_,{color:"black",size:"lg"},{default:v(()=>[h(f(s(a(g)))+" : "+f(s(a(t)))+" : "+f(s(a(u))),1)]),_:1})])}}},K=U(J,[["__scopeId","data-v-5b7b9e72"]]),P={key:0,class:"max-w-2xl mx-auto pb-10 ns"},R=["innerHTML"],W={class:"flex gap-3 my-2 flex-wrap"},Z={class:"mt-3 space-y-2"},ee=["onClick"],te={class:"text-center"},se={key:1},re={__name:"questions",setup(C){const{$axios:x,$userStore:g}=O(),t=l(null),u=l(!1),d=l(null),s=q("timer",null),o=async()=>{try{if(u.value){L().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3}),B("/");return}const e=t.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));x.post("/exam/submit",{answers:e}),clearTimeout(s.value),s.value=null,L().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch(e){console.log("===================================="),console.log(e),console.log("====================================")}B("/")},b=async()=>{const{data:e}=await x.get("/exam");if(s.value&&clearTimeout(s.value),e.not_started){L().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),B("/");return}t.value=e.questions,d.value=e.end_time,u.value=e.participated,s.value=setTimeout(()=>{o()},d.value-new Date().getTime())};N(()=>{b()});const _=(e,c)=>{t.value[e].selected=c};return(e,c)=>{const y=j,V=S,$=A("Vue3Lottie"),z=K,E=F("katex");return n(),r(T,null,[a(t)?(n(),r("div",P,[(n(!0),r(T,null,M(a(t),(k,m)=>(n(),r("div",{key:m,class:D(["p-5 mx-auto my-3 relative text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":a(t)[m].selected}])},[p("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:k.question},null,8,R),p("div",W,[i(y,null,{default:v(()=>[h(" Q no. "+f(m+1),1)]),_:2},1024),i(y,{color:"violet"},{default:v(()=>[h(f(k.subject),1)]),_:2},1024),i(y,{color:"emerald"},{default:v(()=>[h(" 1 Marks")]),_:1})]),p("div",Z,[(n(!0),r(T,null,M(k.options,(w,I)=>(n(),r("div",{key:I,class:D(["flex items-center transition z-10 hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":a(t)[m].selected==w._id}]),onClick:oe=>_(m,w._id)},[Y(p("div",null,null,512),[[E,w.option_text]])],10,ee))),128))])],2))),128)),p("div",te,[i(V,{size:"lg",onClick:o},{default:v(()=>[h(" Submit ")]),_:1})])])):(n(),r("div",se,[i($,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),a(t)?(n(),H(z,{key:2,end_time:a(d)},null,8,["end_time"])):Q("",!0)],64)}}};export{re as default};
