import{_ as B}from"./CZbTxhus.js";import{_ as C}from"./B9mVDR3E.js";import{r as i,k as N,l as M,g as P,h as s,o as _,c as m,a as t,t as u,b as n,w as f,F as A,m as H,n as T,q as y,s as D,v as F,d as R,j}from"./CSFbdqlw.js";import{_ as q}from"./B_Qi-dq_.js";import{_ as E}from"./BWau3Oa1.js";import{_ as I}from"./Fx_PF7rs.js";import{H as L}from"./Dog2zgWk.js";import"./C-ZwuSMX.js";import"./BHP1Cijq.js";const $={key:0},G={class:"text-2xl font-semibold my-4"},z={class:"flex justify-between mb-3"},J={class:"flex gap-4 items-end"},K={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},O={class:"w-full text-sm text-left text-gray-500"},Q=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Name "),t("th",{scope:"col",class:"px-6 py-3"}," Phone "),t("th",{scope:"col",class:"px-6 py-3"}," Institute "),t("th",{scope:"col",class:"px-6 py-3"}," Batch "),t("th",{scope:"col",class:"px-6 py-3"}," Score "),t("th",{scope:"col",class:"px-6 py-3"}," Status ")])],-1),W={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},X={class:"px-6 py-4"},Y={class:"px-6 py-4"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4"},et={class:"px-6 py-4"},st={class:"mt-5"},ot={key:1},mt={__name:"leaderboard",setup(at){const{$axios:g}=j(),h=i(!1),l=i(null),p=i(1),r=i(""),c=i(""),d=i(50),x=async()=>{try{const o={};r.value&&(o.search=r.value),d.value&&(o.limit=d.value),p.value&&(o.page=p.value),c.value&&c.value!=="All"&&(o.batch=c.value);const{data:a}=await g.get("/exam/submissions",{params:o});l.value=a}catch(o){console.log(o.message)}},V=async()=>{try{h.value=!0;const{status:o}=await g.post("/exam/calculate");o===200&&(D().add({title:"Marks calculated"}),h.value=!1,x())}catch(o){console.log(o.message),h.value=!1}};return N([c,d,p],()=>{x()}),M(r,()=>{x()},1e3),P(()=>{x()}),(o,a)=>{const w=B,v=C,k=F,b=q,S=E,U=I;return s(l)?(_(),m("div",$,[t("h1",G," Submissions - Total "+u(s(l).totalResults)+" Students ",1),t("div",z,[n(v,{label:"Search"},{default:f(()=>[n(w,{modelValue:s(r),"onUpdate:modelValue":a[0]||(a[0]=e=>y(r)?r.value=e:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),t("div",J,[t("div",null,[n(k,{onClick:V,loading:s(h)},{default:f(()=>[R(" Calculate Marks ")]),_:1},8,["loading"])]),n(v,{label:"Per Page"},{default:f(()=>[n(b,{options:[10,50,100,500,s(l).totalDocs],modelValue:s(d),"onUpdate:modelValue":a[1]||(a[1]=e=>y(d)?d.value=e:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),n(v,{label:"Batch"},{default:f(()=>[n(b,{options:["All",...s(L)],modelValue:s(c),"onUpdate:modelValue":a[2]||(a[2]=e=>y(c)?c.value=e:null),placeholder:"HSC Batch"},null,8,["options","modelValue"])]),_:1})])]),s(l)&&s(l).submissions?(_(),m("div",K,[t("table",O,[Q,t("tbody",null,[(_(!0),m(A,null,H(s(l).submissions,e=>(_(),m("tr",{key:e.user._id,class:"border-b"},[t("th",W,u(e.user.name),1),t("td",X,u(e.user.phone),1),t("td",Y,u(e.user.institute),1),t("td",Z,u(e.user.batch),1),t("td",tt,u(e.marks),1),t("td",et,u(e.status),1)]))),128))])])])):T("",!0),t("div",st,[n(S,{class:"mx-auto",modelValue:s(p),"onUpdate:modelValue":a[3]||(a[3]=e=>y(p)?p.value=e:null),"page-count":s(l).limit,total:s(l).totalResults},null,8,["modelValue","page-count","total"])])])):(_(),m("div",ot,[n(U)]))}}};export{mt as default};
