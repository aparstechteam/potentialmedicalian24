import{_ as U}from"./B_fM9rZ0.js";import{_ as q,r as l,l as N,o as n,c as r,b as i,w as v,d as x,t as h,j as a,z as S,as as H,F as T,s as D,a as p,i as Q,v as A,y as L,X as B,at as C,h as F,U as X,L as E,I as Y,k as O}from"./Be_IBAFX.js";const G=window.setInterval,J={class:"fixed__timer"},K={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(M){const f=M,g=l(0),t=l(0),u=l(0),d=()=>{let o=new Date(f.end_time).getTime(),b=G(()=>{let m=new Date().getTime(),e=o-m;g.value=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),t.value=Math.floor(e%(1e3*60*60)/(1e3*60)),u.value=Math.floor(e%(1e3*60)/1e3),e<0&&clearInterval(b)},1e3)};N(()=>{d()});const s=o=>o<10?`0${o}`:o;return(o,b)=>{const m=S;return n(),r("div",J,[i(m,{color:"black",size:"lg"},{default:v(()=>[x(h(s(a(g)))+" : "+h(s(a(t)))+" : "+h(s(a(u))),1)]),_:1})])}}},P=q(K,[["__scopeId","data-v-5b7b9e72"]]),R={key:0,class:"max-w-2xl mx-auto pb-10 ns"},W=["innerHTML"],Z={class:"flex gap-3 my-2 flex-wrap"},ee={class:"mt-3 space-y-2"},te=["onClick"],se={class:"text-center"},oe={key:1},ce={__name:"questions",setup(M){const{$axios:f,$userStore:g}=O(),t=l(null),u=l(!1),d=l(null),s=H("timer",null),o=async()=>{try{if(u.value){L().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3,color:"green"}),B("revisit","submit","revisited exam submitted"),C("/");return}const e=t.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));f.post("/exam/submit",{answers:e}),clearTimeout(s.value),s.value=null,L().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3,color:"green"}),B("exam","submit","exam submitted")}catch(e){console.log("===================================="),console.log(e),console.log("====================================")}C("/")},b=async()=>{const{data:e}=await f.get("/exam");if(s.value&&clearTimeout(s.value),e.not_started){L().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),C("/");return}t.value=e.questions,d.value=e.end_time,u.value=e.participated,s.value=setTimeout(()=>{o()},d.value-new Date().getTime()),B("exam","start","exam started")};N(()=>{b()});const m=(e,c)=>{t.value[e].selected=c};return(e,c)=>{const k=U,V=S,$=F("Vue3Lottie"),z=P,I=X("katex");return n(),r(T,null,[a(t)?(n(),r("div",R,[(n(!0),r(T,null,D(a(t),(y,_)=>(n(),r("div",{key:_,class:E(["p-5 mx-auto my-3 relative text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":a(t)[_].selected}])},[p("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:y.question},null,8,W),p("div",Z,[i(k,null,{default:v(()=>[x(" Q no. "+h(_+1),1)]),_:2},1024),i(k,{color:"violet"},{default:v(()=>[x(h(y.subject),1)]),_:2},1024),i(k,{color:"emerald"},{default:v(()=>[x(" 1 Marks")]),_:1})]),p("div",ee,[(n(!0),r(T,null,D(y.options,(w,j)=>(n(),r("div",{key:j,class:E(["flex items-center transition z-10 hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":a(t)[_].selected==w._id}]),onClick:ne=>m(_,w._id)},[Y(p("div",null,null,512),[[I,w.option_text]])],10,te))),128))])],2))),128)),p("div",se,[i(V,{size:"lg",onClick:o},{default:v(()=>[x(" Submit ")]),_:1})])])):(n(),r("div",oe,[i($,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),a(t)?(n(),Q(z,{key:2,end_time:a(d)},null,8,["end_time"])):A("",!0)],64)}}};export{ce as default};
