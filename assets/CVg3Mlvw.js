import{_ as B}from"./cPofD4w4.js";import{_ as S}from"./yhVVQixd.js";import{_ as C}from"./CtdDX1Vt.js";import{r as m,n as $,q as N,l as D,j as s,o as d,c as _,a as t,t as p,b as n,w as x,F as P,s as E,v as g,x as y,i as H,d as T,k as F,y as M,z as j}from"./BOVZoHbn.js";import{_ as q}from"./Dw3rWviL.js";import{_ as I}from"./BDgNfAs0.js";import{H as L}from"./DsxYSGlx.js";const z={key:0},G={class:"text-2xl font-semibold my-4"},R={class:"flex justify-between mb-3"},J={class:"flex gap-4"},K={key:0,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},O={class:"w-full text-sm text-left text-gray-500"},Q=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"}," Name "),t("th",{scope:"col",class:"px-6 py-3"}," Phone "),t("th",{scope:"col",class:"px-6 py-3"}," Email "),t("th",{scope:"col",class:"px-6 py-3"}," Institute "),t("th",{scope:"col",class:"px-6 py-3"}," Batch "),t("th",{scope:"col",class:"px-6 py-3"}," Address "),t("th",null," Action ")])],-1),W={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},X={class:"px-6 py-4"},Y={class:"px-6 py-4"},Z={class:"px-6 py-4"},tt={class:"px-6 py-4"},et={class:"px-6 py-4"},ot={key:0},st={class:"mt-5"},at={key:1},mt={__name:"students",setup(lt){const{$axios:b}=F(),l=m(null),i=m(1),r=m(""),c=m(""),u=m(50),f=async()=>{try{const a={};r.value&&(a.search=r.value),u.value&&(a.limit=u.value),i.value&&(a.page=i.value),c.value&&c.value!=="All"&&(a.batch=c.value);const{data:o}=await b.get("/auth/users",{params:a});l.value=o.users}catch(a){console.log(a.message)}};$([c,u,i],()=>{f()}),N(r,()=>{f()},1e3);const w=async a=>{let o=prompt("Enter password");if(o)try{const{data:h}=await b.post("/auth/admin/signup",{user:a,password:o});M().add({title:"Admin created successfully"})}catch(h){console.log(h.message)}};return D(()=>{f()}),(a,o)=>{const h=B,v=S,V=C,k=j,U=q,A=I;return s(l)?(d(),_("div",z,[t("h1",G," Users - Total "+p(s(l).totalDocs)+" Students ",1),t("div",R,[n(v,{label:"Search"},{default:x(()=>[n(h,{modelValue:s(r),"onUpdate:modelValue":o[0]||(o[0]=e=>y(r)?r.value=e:null),placeholder:"Search"},null,8,["modelValue"])]),_:1}),t("div",J,[n(v,{label:"Per Page"},{default:x(()=>[n(V,{options:[10,50,100,500,s(l).totalDocs],modelValue:s(u),"onUpdate:modelValue":o[1]||(o[1]=e=>y(u)?u.value=e:null),placeholder:"Per page"},null,8,["options","modelValue"])]),_:1}),n(v,{label:"Batch"},{default:x(()=>[n(V,{options:["All",...s(L)],modelValue:s(c),"onUpdate:modelValue":o[2]||(o[2]=e=>y(c)?c.value=e:null),placeholder:"HSC Batch"},null,8,["options","modelValue"])]),_:1})])]),s(l)&&s(l).docs?(d(),_("div",K,[t("table",O,[Q,t("tbody",null,[(d(!0),_(P,null,E(s(l).docs,e=>(d(),_("tr",{key:e._id,class:"border-b"},[t("th",W,p(e.name),1),t("td",X,p(e.phone),1),t("td",Y,p(e.email),1),t("td",Z,p(e.institute),1),t("td",tt,p(e.batch),1),t("td",et,[e.address||e.district||e.division?(d(),_("div",ot,p(`${e.address} ${e.district} ${e.division}`),1)):g("",!0)]),t("td",null,[a.$userStore.role=="superadmin"?(d(),H(k,{key:0,onClick:nt=>w(e._id)},{default:x(()=>[T(" Make Admin ")]),_:2},1032,["onClick"])):g("",!0)])]))),128))])])])):g("",!0),t("div",st,[n(U,{class:"mx-auto",modelValue:s(i),"onUpdate:modelValue":o[3]||(o[3]=e=>y(i)?i.value=e:null),"page-count":s(l).limit,total:s(l).totalDocs},null,8,["modelValue","page-count","total"])])])):(d(),_("div",at,[n(A)]))}}};export{mt as default};
