import{_ as j}from"./BCLlExTB.js";import{_ as z,r as l,g as L,o,c as i,b as _,w as v,d as x,t as g,h as n,v as M,F as N,m as E,a as h,S as H,n as J,s as k,ar as B,V as O,T as Q,J as I,G as U,j as A}from"./CSFbdqlw.js";const F=window.setInterval,Y={class:"fixed__timer"},G={__name:"ExamTimer",props:{end_time:{type:Number,required:!0}},setup(C){const b=C,t=l(0),m=l(0),d=l(0),y=()=>{let a=new Date(b.end_time).getTime(),w=F(()=>{let p=new Date().getTime(),e=a-p;t.value=Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),m.value=Math.floor(e%(1e3*60*60)/(1e3*60)),d.value=Math.floor(e%(1e3*60)/1e3),e<0&&clearInterval(w)},1e3)};L(()=>{y()});const u=a=>a<10?`0${a}`:a;return(a,w)=>{const p=M;return o(),i("div",Y,[_(p,{color:"black",size:"lg"},{default:v(()=>[x(g(u(n(t)))+" : "+g(u(n(m)))+" : "+g(u(n(d))),1)]),_:1})])}}},X=z(G,[["__scopeId","data-v-5b7b9e72"]]),K={key:0,class:"max-w-2xl mx-auto pb-10 ns"},P=["innerHTML"],R={class:"flex gap-3 my-2 flex-wrap"},W={class:"mt-3 space-y-2"},Z=["onClick"],ee={class:"text-center"},te={key:1},ae={__name:"questions",setup(C){const{$axios:b}=A(),t=l(null),m=l(!1),d=l(null),y=l(null),u=async()=>{try{if(m.value){k().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"You answers have been submitted successfully",life:3e3}),B("/");return}const e=t.value.filter(s=>s.selected).map(s=>({q:s._id,a:s.selected}));b.post("/exam/submit",{answers:e}),clearTimeout(y.value),k().add({type:"success",icon:"i-heroicons-check-circle",title:"Submitted",description:"Your answers have been submitted successfully",life:3e3})}catch{k().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Something went wrong",life:3e3})}B("/")},a=async()=>{const{data:e}=await b.get("/exam");if(e.not_started){k().add({type:"error",icon:"i-heroicons-x-circle",title:"Error",description:"Exam has not started yet",life:3e3}),B("/");return}t.value=e.questions,d.value=e.end_time,m.value=e.participated,e.participated||(p(),y.value=setTimeout(()=>{u()},d.value-new Date().getTime()))};L(()=>{a()});const w=(e,s)=>{t.value[e].selected=s;let r=t.value.filter(c=>c.selected).map(c=>({q:c._id,a:c.selected}));localStorage.setItem("answers",JSON.stringify(r))},p=()=>{let e=JSON.parse(localStorage.getItem("answers"));e&&e.length>0&&e.forEach(s=>{let r=t.value.findIndex(c=>c._id==s.q);r!=-1&&(t.value[r].selected=s.a)})};return(e,s)=>{const r=j,c=M,V=O("Vue3Lottie"),D=X,q=Q("katex");return o(),i(N,null,[n(t)?(o(),i("div",K,[(o(!0),i(N,null,E(n(t),(T,f)=>(o(),i("div",{key:f,class:I(["p-5 mx-auto my-3 text-lg border border-gray-300 rounded-md shadow-lg bg-white kalpurush",{"stop-events":n(t)[f].selected}])},[h("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:T.question},null,8,P),h("div",R,[_(r,null,{default:v(()=>[x(" Q no. "+g(f+1),1)]),_:2},1024),_(r,{color:"sky"},{default:v(()=>[x(g(T.subject),1)]),_:2},1024),_(r,{color:"orange"},{default:v(()=>[x(" 10 Marks")]),_:1})]),h("div",W,[(o(!0),i(N,null,E(T.options,(S,$)=>(o(),i("div",{key:$,class:I(["flex items-center transition hover:scale-105 duration-200 hover:border-green-300 cursor-pointer p-2 border rounded-md",{"border-2 border-green-500":n(t)[f].selected==S._id}]),onClick:se=>w(f,S._id)},[U(h("div",null,null,512),[[q,S.option_text]])],10,Z))),128))])],2))),128)),h("div",ee,[_(c,{size:"lg",onClick:u},{default:v(()=>[x(" Submit ")]),_:1})])])):(o(),i("div",te,[_(V,{animationLink:"https://lottie.host/633bd0cd-943c-451d-a93f-1907c3280856/jlTQkXgHrw.json",height:"300px",width:"300px"})])),n(t)?(o(),H(D,{key:2,end_time:n(d)},null,8,["end_time"])):J("",!0)],64)}}};export{ae as default};
